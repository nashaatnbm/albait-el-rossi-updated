<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ุทูุจุงุช ุงูุนููู | ุงูุจูุช ุงูุฑูุณู</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>

<div class="admin-layout">
  <aside class="admin-sidebar">
    <div class="sidebar-brand">๐ป ุงูุจูุช ุงูุฑูุณู</div>
    <a href="/admin" class="sidebar-link">๐ ุงูุทูุจุงุช</a>
    <a href="/admin/customers" class="sidebar-link active">๐ฅ ุงูุนููุงุก</a>
    <a href="/" class="sidebar-link">๐ ุงููููุน</a>
    <a href="/auth/logout" class="sidebar-link" style="color:#e05252;">๐ช ุชุณุฌูู ุงูุฎุฑูุฌ</a>
  </aside>

  <main class="admin-main">
    <div class="admin-header">
      <a href="/admin/customers" style="color:#d4af37;text-decoration:none;font-size:13px;">โ ุฑุฌูุน ููุนููุงุก</a>
      <h1>ุทูุจุงุช: <%= customer.name %></h1>
      <p><%= customer.email %> <% if (customer.phone) { %> | <%= customer.phone %> <% } %></p>
    </div>

    <div class="table-container">
      <% if (orders.length === 0) { %>
        <div style="padding:40px;text-align:center;color:#666;">ูุง ุชูุฌุฏ ุทูุจุงุช ููุฐุง ุงูุนููู</div>
      <% } else { %>
      <table>
        <thead>
          <tr>
            <th>ุฑูู ุงูุทูุจ</th>
            <th>ุงูููุชุฌุงุช</th>
            <th>ุงูุฅุฌูุงูู</th>
            <th>ุงูุญุงูุฉ</th>
            <th>ุงูุชุงุฑูุฎ</th>
            <th>ุชุญุฏูุซ</th>
          </tr>
        </thead>
        <tbody>
          <% orders.forEach(order => { %>
          <tr>
            <td><span class="order-id">#<%= order._id.toString().slice(-6).toUpperCase() %></span></td>
            <td style="font-size:12px;color:#a0a0b0;max-width:250px;">
              <%= order.items.map(i => `${i.productName} ร${i.quantity}`).join(', ') %>
            </td>
            <td style="font-weight:700;color:#d4af37;"><%= order.totalAmount %> ุฑ.ุณ</td>
            <td>
              <span class="status-badge status-<%= order.status %>">
                <% const labels = { pending:'ููุฏ ุงูุงูุชุธุงุฑ', processing:'ููุฏ ุงูุชูููุฐ', completed:'ููุชูู', cancelled:'ููุบู' } %>
                <%= labels[order.status] %>
              </span>
            </td>
            <td class="order-date"><%= new Date(order.createdAt).toLocaleDateString('ar-EG') %></td>
            <td>
              <select class="status-select" data-id="<%= order._id %>">
                <option value="pending" <%= order.status==='pending' ? 'selected' : '' %>>ููุฏ ุงูุงูุชุธุงุฑ</option>
                <option value="processing" <%= order.status==='processing' ? 'selected' : '' %>>ููุฏ ุงูุชูููุฐ</option>
                <option value="completed" <%= order.status==='completed' ? 'selected' : '' %>>ููุชูู</option>
                <option value="cancelled" <%= order.status==='cancelled' ? 'selected' : '' %>>ููุบู</option>
              </select>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
      <% } %>
    </div>
  </main>
</div>

<script src="/js/main.js"></script>
</body>
</html>
