<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ุงูุนููุงุก | ุงูุจูุช ุงูุฑูุณู</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>

<div class="admin-layout">
  <aside class="admin-sidebar">
    <div class="sidebar-brand">๐ป ุงูุจูุช ุงูุฑูุณู<br><small style="font-size:10px;color:#666;font-weight:400">ููุญุฉ ุงูุชุญูู</small></div>
    <a href="/admin" class="sidebar-link">๐ ุงูุทูุจุงุช</a>
    <a href="/admin/products" class="sidebar-link">๐ฆ ุงูููุชุฌุงุช</a>
    <a href="/admin/customers" class="sidebar-link active">๐ฅ ุงูุนููุงุก</a>
    <a href="/" class="sidebar-link">๐ ุงููููุน</a>
    <a href="/auth/logout" class="sidebar-link" style="color:#e05252;">๐ช ุชุณุฌูู ุงูุฎุฑูุฌ</a>
  </aside>

  <main class="admin-main">
    <div class="admin-header">
      <h1>๐ฅ ุงูุนููุงุก</h1>
      <p>ุฅุฌูุงูู ุงูุนููุงุก: <%= customers.length %></p>
    </div>

    <% if (customers.length === 0) { %>
      <div style="text-align:center;padding:60px;color:#666;">ูุง ููุฌุฏ ุนููุงุก ุจุนุฏ</div>
    <% } else { %>
    <div class="customers-grid">
      <% customers.forEach(c => { %>
      <a href="/admin/customer/<%= c._id %>/orders" class="customer-card">
        <div class="customer-avatar"><%= c.name.charAt(0) %></div>
        <div class="customer-name-card"><%= c.name %></div>
        <div class="customer-email"><%= c.email %></div>
        <% if (c.phone) { %>
          <div class="customer-email">๐ <%= c.phone %></div>
        <% } %>
        <div class="customer-stats">
          <div class="cstat">
            <div class="cstat-val"><%= c.orderCount %></div>
            <div class="cstat-label">ุทูุจ</div>
          </div>
          <div class="cstat">
            <div class="cstat-val"><%= c.totalSpent %></div>
            <div class="cstat-label">ุฑูุงู</div>
          </div>
          <div class="cstat">
            <div class="cstat-val"><%= new Date(c.createdAt).toLocaleDateString('ar-EG') %></div>
            <div class="cstat-label">ุชุงุฑูุฎ ุงูุชุณุฌูู</div>
          </div>
        </div>
      </a>
      <% }) %>
    </div>
    <% } %>
  </main>
</div>

<script src="/js/main.js"></script>
</body>
</html>
