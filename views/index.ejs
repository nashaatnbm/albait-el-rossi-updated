
<%- include('../partials/header') %>

<!-- Hero -->
<section class="hero">
  <div class="hero-card">
    <div class="hero-content">
      <span class="hero-badge">โญ ุนุฑูุถ ููุงูุฉ ุงูุฃุณุจูุน</span>
      <h1 class="hero-title">
        ุฃูุถู ุงูููุชุฌุงุช<br>
        ุงูุฑูุณูุฉ <span>ุงูุฃุตููุฉ</span><br>
        ูุจูุชู
      </h1>
      <p class="hero-sub">ูุฌูุจ ูู ุฃุฌูุฏ ุงูููุชุฌุงุช ุงูุฑูุณูุฉ ูุจุงุดุฑุฉ ูู ุงููุตูุน โ ุดููููุงุชุฉุ ุดุงูุ ูุฑุงุกุ ุณูุงููู ูุฃูุซุฑ. ุชูุตูู ุณุฑูุน ููุณุนูุฏูุฉ ูุงูุฅูุงุฑุงุช ูุฌููุน ุงูุฏูู ุงูุนุฑุจูุฉ.</p>
      <div class="hero-btns">
        <a href="/checkout" class="btn-primary">ุชุณูู ุงูุขู โ</a>
        <a href="#products" class="btn-secondary">ุงูุชุดู ุงูุนุฑูุถ</a>
      </div>
      <div class="hero-stats">
        <div class="stat"><span class="stat-val">โญ 4.9</span><span class="stat-label">ุชูููู ุงูุนููุงุก</span></div>
        <div class="stat"><span class="stat-val">17+</span><span class="stat-label">ุฏููุฉ ุชูุตูู</span></div>
        <div class="stat"><span class="stat-val">5000+</span><span class="stat-label">ุทูุจ ูุงุฌุญ</span></div>
      </div>
    </div>
    <div class="hero-bear">๐ป</div>
  </div>
</section>

<!-- Products -->
<section class="section" id="products">
  <h2 class="section-title">๐๏ธ ููุชุฌุงุชูุง ุงููููุฒุฉ</h2>
  <div class="products-grid">
    <% products.forEach(product => { %>
    <div class="product-card">
      <div class="product-img">
        <% if (product.badge) { %>
          <span class="product-badge badge-<%= product.badgeColor %>"><%= product.badge %></span>
        <% } %>
        <%= product.emoji %>
      </div>
      <div class="product-info">
        <div class="product-cat"><%= product.category %></div>
        <div class="product-name"><%= product.name %></div>
        <% if (product.description) { %>
          <div class="product-desc"><%= product.description %></div>
        <% } %>
        <div class="product-footer">
          <div>
            <div class="product-price"><%= product.price %> <span>ุฑูุงู</span></div>
            <% if (product.originalPrice) { %>
              <div class="product-original-price"><%= product.originalPrice %> ุฑูุงู</div>
            <% } %>
          </div>
          <button class="btn-add-cart" onclick="addToCart(this, `<%= product.name %>`, <%= product.price %>)">+</button>
        </div>
      </div>
    </div>
    <% }) %>
    <div class="product-card" style="display:flex;align-items:center;justify-content:center;min-height:200px;">
      <a href="/checkout" class="btn-primary" style="text-align:center">ุงุทูุจ ุงูุขู ๐</a>
    </div>
  </div>
</section>

<script>
function addToCart(btn, name, price) {
  fetch('/cart/add', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ name, price, quantity: 1 })
  }).then(res => {
    if (res.ok) {
      btn.textContent = 'โ';
      btn.style.background = '#28a745';
      setTimeout(() => { btn.textContent = '+'; btn.style.background = ''; }, 1500);
      const badge = document.querySelector('.cart-badge');
      if (badge) badge.textContent = parseInt(badge.textContent || 0) + 1;
    } else if (res.status === 401) {
      window.location.href = '/auth/login';
    }
  }).catch(() => {
    btn.textContent = 'โ';
    btn.style.background = '#28a745';
    setTimeout(() => { btn.textContent = '+'; btn.style.background = ''; }, 1500);
  });
}
</script>

<%- include('../partials/footer') %>
